# Product Requirements Document (PRD)
## Orion Soft Internal AI Assistant — **Visior**

---

# 1. Overview / Vision

Orion Soft Internal AI Assistant (**Visior**) — это корпоративный интеллектуальный ассистент, позволяющий сотрудникам, клиентам и партнёрам компании получать быстрые, точные и безопасные ответы на вопросы о продуктах Orion Soft.

Visior объединяет:
- поиск по внутренней документации,
- генерацию корректных ответов с помощью LLM,
- многослойный retrieval (doc → section → chunk),
- безопасное управление доступом к данным,
- автоматическую индексацию документов,
- строгую безопасность (OWASP LLM Top-10),
- унифицированный API и интерфейсы интеграции.

Visior повышает скорость поддержки, снижает нагрузку на экспертов, ускоряет онбординг сотрудников и обеспечивает качественный self-service для клиентов и партнёров.

---

# 2. Goals

## 2.1 Primary Goals
1. Предоставлять пользователям точные, обоснованные и сверяемые ответы на запросы о продуктах Orion Soft.
2. Обеспечить доступ к корпоративной документации через RAG-pipeline с высокой точностью.
3. Минимизировать эскалации в команду техподдержки за счёт автоматизации ответов.
4. Сократить время поиска информации в больших документах.
5. Гарантировать защиту данных, исключить утечки и небезопасные ответы.
6. Поддерживать интеграцию в корпоративную инфраструктуру (SSO, портал, чат-боты).

## 2.2 Secondary Goals
- Ускорить онбординг сотрудников.
- Предоставлять статистику эффективности и использования ассистента.
- Снизить стоимость поддержки на пользователя.
- Стандартизировать доступ к знаниям на уровне всей компании.

---

# 3. Non-Goals
Продукт **не предназначен** для:
- генерации кода или выполнения скриптов;
- выполнения произвольных действий в корпоративных системах без явного разрешения;
- предсказания данных, ML-аналитики или BI-отчётов;
- замены полноценного инженерного консультирования для сложных инцидентов.

---

# 4. Stakeholders

## 4.1 Primary Stakeholders
### 1. Support Engineers (L1/L2/L3)
- Основные пользователи.
- Задача: быстро находить решения проблем клиентов.
- Значимость: критически высокая.

### 2. Internal Employees (Dev, QA, Product, Sales)
- Пользуются ассистентом для поиска спецификаций, инструкций, архитектуры.
- Значимость: высокая.

### 3. Customers & Partners (если предусмотрена внешняя версия)
- Используют ассистента для self-service.
- Значимость: высокая.

## 4.2 Secondary Stakeholders
### 4. Product Managers
- Определяют функциональность и принимают решения о roadmap.
- Ответственные за бизнес-ценность.

### 5. AI/ML Team
- Отвечают за LLM-модель, retrievers, embeddings, качество.

### 6. Security & Compliance Department
- Разрабатывают политики безопасности, проверяют соответствие OWASP.

### 7. IT Operations / SRE
- Уполняют развертывание, мониторинг, обновления, SLA.

### 8. Documentation Team
- Готовят документацию для ingestion, поддерживают структуру docs.

### 9. DevOps / Platform Team
- Поддерживают Kubernetes, CI/CD, инфраструктуру, логирование.

---

# 5. User Personas

## Persona #1 — Support Engineer
- **Цель:** быстро найти инструкцию или ответ для клиента.
- **Проблема:** объём документации большой; поиск вручную занимает минуты.
- **Pain:** часто приходилось эскалировать вопросы к экспертам.

## Persona #2 — Internal Developer
- **Цель:** быстро получить информацию о внутренней архитектуре продукта.
- **Проблема:** документы разбросаны, обновляются неравномерно.

## Persona #3 — Product Manager
- **Цель:** понимать требования, фичи продукта, историю изменений.

## Persona #4 — New Employee
- **Цель:** быстро изучить продукты и процессы.

## Persona #5 — Customer / Partner (внешний режим)
- **Цель:** self-service по документации, API, интеграциям.

---

# 6. Key Use Cases

## 6.1 Core Use Cases
1. **Поиск ответа на вопрос** по продукту (в стиле Q&A).
2. **Пояснение инструкций** из документации.
3. **Гид по конфигурации**, например LDAP или API.
4. **Сравнение разных версий продукта** (если доступно).
5. **Консультации по настройке модулей**.
6. **Поиск нужной секции документа** с MCP-доступом.
7. **Чтение PDF/Docx через ассистента**.
8. **Загрузка новой документации в систему**.

## 6.2 Secondary Use Cases
9. Локализация ответа (RU/EN).
10. Объяснение ошибки (error lookup).
11. Извлечение данных из таблиц PDF.
12. Автоматическое создание summary документов.

---

# 7. Functional Requirements

## 7.1 Core AI Assistant Functionality
1. Поддержка natural language Q&A.
2. Retrieval-Augmented Generation (RAG).
3. Multi-stage retrieval: document → section → chunk.
4. MCP-доступ к документам (точечные чтения страниц).
5. Формирование ответа с ссылками на источники.
6. Полная история диалога.
7. Поддержка контекстного запроса (session memory).

## 7.2 Document Ingestion
1. Загрузка PDF/Docx через UI или API.
2. Парсинг структуры документа (headers/sections).
3. Chunking текста.
4. Генерация section summaries.
5. Создание embeddings.
6. Запись в Vector DB.
7. Мониторинг статуса ingestion.

## 7.3 Safety
1. Input Safety Filter (content safety, DLP, RBAC).
2. Output Safety Filter (hallucinations, секреты, токсичность).
3. Tenant isolation.
4. Логирование нарушений.

## 7.4 Integration Requirements
1. SSO/OAuth2/JWT аутентификация.
2. API Gateway, REST API.
3. Поддержка интеграций:
   - корпоративный портал,
   - чат-боты,
   - Slack/Telegram/Teams
   - CRM/Helpdesk.

---

# 8. Non-Functional Requirements (NFRs)

## 8.1 Performance
- Latency ответа ассистента < **3 секунд** при средней нагрузке.
- Retrieval latency < **250 ms**.
- Ingestion одного документа < **30 минут**.

## 8.2 Scalability
- Горизонтальное масштабирование orchestrator, gateway, retrieval.
- Горизонтальная масштабируемость ingestion-воркеров.
- Нагрузка до **1000 одновременных пользователей**.

## 8.3 Reliability
- SLA 99.5%.
- Автоматическое восстановление ingestion при сбое.
- Circuit breakers на все внешние сервисы.

## 8.4 Security
- Соответствие OWASP LLM Top-10.
- mTLS внутри кластера.
- Политики секретов (Vault).
- Audit log всех запросов.

## 8.5 Compliance
- Обработка PII в соответствии с корпоративными правилами.
- Журналирование без сохранения чувствительных данных.

---

# 9. Success Metrics (KPIs)

## 9.1 Business KPIs
- Снижение нагрузки на L1 поддержку: **−30%**.
- Ускорение разрешения тикетов: **−40% по времени**.
- Снижение эскалаций к экспертам: **−25%**.
- Ускорение онбординга сотрудников.

## 9.2 Technical KPIs
- RAG Recall@20 > 0.70
- Answer Satisfaction Score (через фидбек) > 4.2/5
- Output Safety violations < 0.1%
- Hallucination-rate в ответах < 1%

---

# 10. Risks & Mitigations

## Risk 1: Hallucinations LLM
Mitigation: RAG, Output Guard, принуждение ссылок.

## Risk 2: Ошибки в документе
Mitigation: указание версий, метаданные, alerts от ingestion.

## Risk 3: Небезопасные ответы
Mitigation: двойной safety контур.

## Risk 4: Технические ограничения PDF
Mitigation: fallback парсеры, ручное редактирование.

## Risk 5: Низкое качество retrieval
Mitigation: reranking, tuning embeddings, hybrid search.

---

# 11. Open Questions

1. Должна ли внешняя версия ассистента иметь отдельный набор safety-политик?
2. Нужно ли поддерживать мультиязычность документации при ingestion?
3. Требуется ли визуальный UI для просмотра структуры документов?
4. Нужна ли модель feedback-loop для автоматического улучшения RAG?

---

# 12. Appendix

Включает:
- API спецификацию (Public + Internal).
- Архитектурные диаграммы.
- Data Model (ER-диаграммы).
- Security Policy.
- Operational Manual.

---

# END OF PRD
